<div *ngIf="ready">
  <ng-template #t let-fill="fill">
    <span class="star" [class.full]="fill === 100">
      <span class="half" [style.width.%]="fill">&#9733;</span>&#9733;
    </span>
  </ng-template>

  <div class="row">
    <div class="col-sm">
      <div class="text-center">
        <h1><strong>Relaterte Fagpersoner</strong></h1>
      </div>
    </div>
  </div>

  <ul class="list-inline">
    <li class="list-inline-item">
      <mat-button-toggle-group>
        <mat-button-toggle value="true" (change)="filterChange($event)">Filtrering På</mat-button-toggle>
        <mat-button-toggle value="false" (change)="filterChange($event)" [checked]="checked">Filtrering Av</mat-button-toggle>
      </mat-button-toggle-group>
    </li>
    <li class="list-inline-item" *ngIf="showFilter">
      <mat-button-toggle-group>
        <mat-button-toggle value="true" (change)="enviromentChange($event)" [checked]="checked">Eksterne</mat-button-toggle>
        <mat-button-toggle value="false" (change)="enviromentChange($event)">Kollegaer</mat-button-toggle>
      </mat-button-toggle-group>
    </li>
    <li class="list-inline-item" *ngIf="showFilter">
      <mat-button-toggle-group>
        <mat-button-toggle value="false" (change)="neutralityChange($event)">Medforfattere</mat-button-toggle>
        <mat-button-toggle value="true" (change)="neutralityChange($event)" [checked]="checked">Ikke-medforfattere</mat-button-toggle>
      </mat-button-toggle-group>
    </li>
  </ul>

  <div class="table-responsive">
    <table class="table table-hover table-light">
      <thead class="table-light">
        <tr>
          <th>Relevans</th>
          <th>Forsker</th>
          <th>Posisjon</th>
          <th>Institusjon</th>
          <th>Institutt</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let person of dataTable | callback: showFilter : valueNeutrality : valueEnviroment |  paginate: { itemsPerPage: 10, currentPage: page }">
          <td><ngb-rating [rate]="person.similarities" [starTemplate]="t"></ngb-rating></td>
          <td>{{person.firstName}} {{person.lastName}}</td>
          <td>{{person?.position}}</td>
          <td>{{person?.institution}}</td>
          <td>{{person?.institute}}</td>
          <td><input type="button" class="btn btn-primary" value="Besøk" (click)="navigateToProfile(person.cristinID)" /></td>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="row justify-content-center">
    <pagination-controls previousLabel="Tilbake" nextLabel="Neste" (pageChange)="page = $event"></pagination-controls>
  </div>
</div>



